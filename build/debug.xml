<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="scala" name="Create Runnable Jar for Project TIPL">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--ANT 1.7 is required                                        -->
    <target name="basic">
    	<jar destfile="../build/TIPL_basic.jar" filesetmanifest="mergewithoutmain">
            <fileset dir="../bin">
            	<include name="tipl/**/*.class"/>
            	<include name="spark/**/*.class"/>
            	<include name="META-INF/**/*.*"/>
            </fileset>
            
	    <manifest>
                <attribute name="Sealed" value="false"/>
        </manifest>
        </jar>
    </target>
    

    
    <target name="core" depends="basic">
    	<jar destfile="../build/TIPL_core.jar" filesetmanifest="mergewithoutmain">
            <zipfileset excludes="META-INF/MANIFEST.MF" src="TIPL_basic.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/Jama.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/mongo-db.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/sezpoz-1.9.jar"/>
	        <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/lambdaj-with-dependencies.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/ij.jar"/>
            <!-- <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/ij2/ij-data-2.0.0-beta-7.jar"/> -->
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/com.springsource.javax.media.jai.codec.jar"/> 
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/com.springsource.javax.media.jai.core.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/jai_imageio.jar"/>
	    <manifest>
                <attribute name="Sealed" value="false"/>
        </manifest>
        </jar>
    </target>

    <target name="jython" depends="core">
        <jar destfile="../build/TIPL.jar" filesetmanifest="mergewithoutmain">
        	<manifest>
                <attribute name="Main-Class" value="org.python.util.jython"/>
            </manifest>
	    	<zipfileset excludes="META-INF/MANIFEST.MF" src="TIPL_core.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/jython.jar"/>
        </jar>
    </target>
    <target name="fatboy" depends="core">
        <jar destfile="../build/JSTIPL.jar" filesetmanifest="mergewithoutmain" zip64mode="as-needed">
        	<manifest>
                <attribute name="Main-Class" value="org.python.util.jython"/>
            </manifest>
         	<zipfileset excludes="META-INF/MANIFEST.MF" src="TIPL_core.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/spark-core.jar"/>
       		<zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/jython.jar"/>
         </jar>
    </target>
    <target name="fatspark" depends="core">
        <jar destfile="../build/STIPL.jar" filesetmanifest="mergewithoutmain" zip64mode="as-needed">
        	<manifest>
                <attribute name="Main-Class" value="org.apache.spark.repl.Main"/>
            </manifest>
            <zipfileset excludes="META-INF/MANIFEST.MF" src="TIPL_core.jar"/>
            <zipfileset excludes="META-INF/*.SF" src="../tipl-libraries/spark-core.jar"/>
        </jar>
    </target>
    <target name="scala" depends="jython">
       <jar destfile="../build/TIPL_scala.jar" filesetmanifest="mergewithoutmain">
        	<manifest>
                <attribute name="Main-Class" value="scala.tools.nsc.MainGenericRunner"/>
            </manifest>
	    	<zipfileset excludes="META-INF/MANIFEST.MF" src="TIPL_core.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/scala-library.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/scala-swing.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/scala-compiler.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/jline.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/scalap.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/scala-xml.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/scala-partest.jar"/>
        	<zipfileset excludes="META-INF/*.SF" src="../../Informatics/scala/lib/scala-reflect.jar"/>
        </jar>
    </target>
</project>
